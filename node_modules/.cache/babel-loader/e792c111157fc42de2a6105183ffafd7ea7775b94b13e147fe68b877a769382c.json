{"ast":null,"code":"import _taggedTemplateLiteral from\"F:/personal-budget-react (3)/personal-budget-react/personal-budget-react/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\";var _templateObject;import React,{useEffect,useState}from'react';import{Link,useNavigate,useLocation}from'react-router-dom';import'./Menu.css';// Import the CSS file\nimport axios from'axios';import styled from'styled-components';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const CustomNavBar=styled.nav(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  color: white;\\n\"])));function Menu(){const[userId,setUserId]=useState('');const[userFirstName,setUserFirstName]=useState('');const value=localStorage.getItem('userId');const navigate=useNavigate();const location=useLocation();useEffect(()=>{setUserId(value||'');// Fetch user details when userId is available\nif(value){// Replace the following API call with your actual API endpoint to fetch user details\nfetchUserDetails(value);}},[value]);const fetchUserDetails=async userId=>{try{// Replace the following with your actual API endpoint to fetch user details\nconst response=await axios.get(\"http://147.182.240.238:\".concat(3002,\"/api/users/\",userId));const userData=response.data;// Assuming the API response has a \"firstname\" property\nsetUserFirstName(userData.firstname);}catch(error){console.error('Error fetching user details:',error.message);}};const handleLogout=()=>{localStorage.clear();setUserId('');setUserFirstName('');navigate('/');location.reload();};return/*#__PURE__*/_jsx(CustomNavBar,{className:\"menu\",\"aria-label\":\"Main menu\",itemScope:true,itemType:\"https://schema.org/SiteNavigationElement\",children:/*#__PURE__*/_jsx(\"ul\",{style:{display:'flex',justifyContent:'flex-end',listStyleType:'none',padding:15},children:!userId?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"li\",{style:{marginRight:'10px'},children:/*#__PURE__*/_jsx(Link,{itemProp:\"url\",to:\"/\",tabIndex:\"5\",children:\"Login\"})}),/*#__PURE__*/_jsx(\"li\",{style:{marginRight:'10px'},children:/*#__PURE__*/_jsx(Link,{itemProp:\"url\",to:\"/register\",tabIndex:\"6\",children:\"Register\"})})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"li\",{style:{marginRight:'10px'},children:/*#__PURE__*/_jsxs(\"span\",{children:[\"Welcome, \",userFirstName,\"!\"]})}),/*#__PURE__*/_jsx(\"li\",{style:{marginRight:'10px'},children:/*#__PURE__*/_jsx(Link,{itemProp:\"url\",to:\"/login\",tabIndex:\"11\",onClick:handleLogout,children:\"Logout\"})})]})})});}export default Menu;","map":{"version":3,"names":["React","useEffect","useState","Link","useNavigate","useLocation","axios","styled","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","CustomNavBar","nav","_templateObject","_taggedTemplateLiteral","Menu","userId","setUserId","userFirstName","setUserFirstName","value","localStorage","getItem","navigate","location","fetchUserDetails","response","get","concat","userData","data","firstname","error","console","message","handleLogout","clear","reload","className","itemScope","itemType","children","style","display","justifyContent","listStyleType","padding","marginRight","itemProp","to","tabIndex","onClick"],"sources":["F:/personal-budget-react (3)/personal-budget-react/personal-budget-react/src/Menu/Menu.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { Link, useNavigate, useLocation } from 'react-router-dom';\r\nimport './Menu.css'; // Import the CSS file\r\nimport axios from 'axios';\r\nimport styled from 'styled-components';\r\n\r\nconst CustomNavBar = styled.nav`\r\n  color: white;\r\n`;\r\n\r\n\r\n\r\nfunction Menu() {\r\n  const [userId, setUserId] = useState('');\r\n  const [userFirstName, setUserFirstName] = useState('');\r\n  const value = localStorage.getItem('userId');\r\n  const navigate = useNavigate();\r\n  const location = useLocation();\r\n\r\n  useEffect(() => {\r\n    setUserId(value || '');\r\n\r\n    // Fetch user details when userId is available\r\n    if (value) {\r\n      // Replace the following API call with your actual API endpoint to fetch user details\r\n      fetchUserDetails(value);\r\n    }\r\n  }, [value]);\r\n\r\n  \r\n\r\n  const fetchUserDetails = async (userId) => {\r\n    try {\r\n      // Replace the following with your actual API endpoint to fetch user details\r\n      const response = await axios.get(`http://147.182.240.238:${3002}/api/users/${userId}`);\r\n      const userData = response.data;\r\n  \r\n      // Assuming the API response has a \"firstname\" property\r\n      setUserFirstName(userData.firstname);\r\n    } catch (error) {\r\n      console.error('Error fetching user details:', error.message);\r\n    }\r\n  };\r\n  \r\n  \r\n\r\n  const handleLogout = () => {\r\n    localStorage.clear();\r\n    setUserId('');\r\n    setUserFirstName('');\r\n    navigate('/');\r\n    location.reload();\r\n  };\r\n\r\n  return (\r\n    <CustomNavBar className=\"menu\" aria-label=\"Main menu\" itemScope itemType=\"https://schema.org/SiteNavigationElement\">\r\n<ul style={{ display: 'flex', justifyContent: 'flex-end', listStyleType: 'none', padding: 15 }}>\r\n  {!userId ? (\r\n    <>\r\n      <li style={{ marginRight: '10px' }}><Link itemProp=\"url\" to=\"/\" tabIndex=\"5\">Login</Link></li>\r\n      <li style={{ marginRight: '10px' }}><Link itemProp=\"url\" to=\"/register\" tabIndex=\"6\">Register</Link></li>\r\n    </>\r\n  ) : (\r\n    <>\r\n      <li style={{ marginRight: '10px' }}><span>Welcome, {userFirstName}!</span></li>\r\n      <li style={{ marginRight: '10px' }}><Link itemProp=\"url\" to=\"/login\" tabIndex=\"11\" onClick={handleLogout}>Logout</Link></li>\r\n    </>\r\n  )}\r\n</ul>\r\n\r\n    </CustomNavBar>\r\n  );\r\n}\r\n\r\nexport default Menu;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}